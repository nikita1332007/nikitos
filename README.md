# ДЗ по модулю Продвинутый Git
## Цель проекта
Этот проект предназначен для упрощения работы с данными, предоставляя удобные функции для анализа и визуализации. Он поможет пользователям эффективно обрабатывать большие объемы информации.
## Установка
Для установки проекта выполните следующие шаги:

1. Клонируйте репозиторий:

  git clone https://github.com/nikita1332007/nikitos

2. Перейдите в каталог проекта:
   
  cd nikitos

3. Установите зависимости:
   
  shell

  pip install -r requirements.txt

## Использование
1. Импортируйте необходимые модули:

   from nikitos import filter_by_state или sort_by_date

2. Пример использования функции:

Функция filterbystate

Эта функция фильтрует список словарей по значению ключа 'state':

def filter_by_state(dictionaries, state='EXECUTED'):
    result = []
    for item in dictionaries:
        if item.get('state') == state:
            result.append(item)
    return result


print(filter_by_state([{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]))  # [{'id': 41428829, 'state': 'EXECUTED', ...}, {'id': 939719570, 'state': 'EXECUTED', ...}]

Функция sortbydate

Эта функция сортирует список словарей по значению ключа 'date':

def sort_by_date(glossary, reverse=True):
    return sorted(glossary, key=lambda x: x['date'], reverse=reverse)


print(sort_by_date([{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]))  # Список, отсортированный по дате

## Тестирование

Для обеспечения качества и надежности кода в проекте реализованы автоматические тесты с использованием библиотеки [pytest](https://docs.pytest.org/en/stable/).

### Установка зависимостей

Перед запуском тестов убедитесь, что все необходимые зависимости установлены. Вы можете установить их с помощью pip:

bash
pip install -r requirements.txt
### Запуск тестов

Для запуска тестов выполните следующую команду в терминале:

bash
pytest
### Структура тестов

Тесты находятся в директории tests/. Каждый файл теста должен начинаться с префикса test_, а каждое тестируемое имя функции также должно начинаться с test_.

### Примеры тестов

Вот пример теста для функции get_date, который проверяет корректность обработки различных входных данных:

@pytest.mark.parametrize("date_str, expected", [
    ("2024-03-11T02:26:18.671407", "11.03.2024"),
    ("2022-12-31T14:59:59", "31.12.2022"),
    ("2000-01-01", "01.01.2000"),
    ("Некорректная строка", pytest.mark.xfail(raises=ValueError)),
    ("", pytest.mark.xfail(raises=ValueError)),
    (None, pytest.mark.xfail(raises=ValueError)),
])
def get_date(date_str):
    if not isinstance(date_str, str):
        raise ValueError("Input must be a string")


    try:
        return datetime.fromisoformat(date_str).strftime("%d.%m.%Y")
    except ValueError:
        raise ValueError("Invalid date format")
### Дополнительные параметры

Вы можете использовать различные параметры командной строки для pytest, чтобы настроить вывод и поведение тестирования. Например, чтобы получить более подробный вывод, вы можете запустить:

bash
pytest -v
### Заключение

Регулярное выполнение тестов поможет поддерживать качество кода и предотвращать появление ошибок. Мы рекомендуем запускать тесты после внесения изменений в код.

### Модуль generators

#### Описание
Данный модуль реализует функции для работы с финансовыми транзакциями. Он позволяет фильтровать транзакции по валюте, извлекать описания транзакций и генерировать номера карт в заданном диапазоне.


#### Использование

Фильтрация транзакций по валюте

transactions = [...]  # список транзакций
usd_transactions = filter_by_currency(transactions, "USD")

for transaction in usd_transactions:
    print(transaction)
Эта функция возвращает генератор, который выдаёт только те транзакции, у которых код валюты совпадает с указанным.

Извлечение описаний транзакций
Python

descriptions = transaction_descriptions(transactions)

for description in descriptions:
    print(description)
Позволяет получить описания всех транзакций.

Генерация номеров карт
Python

for card_number in card_number_generator(1, 5):
    print(card_number)
Генерирует номера карт в формате ####-####-####-#### на основе заданного диапазона.

# Декоратор Логирования

Этот скрипт на Python содержит декоратор log, который позволяет вести логирование выполнения функций как в указанный файл, так и в консоль.

## Использование

1. Импортируйте декоратор: Включите декоратор в свой скрипт.
2. Примените декоратор: Используйте @log(filename="ваш_лог_файл.txt"), чтобы декорировать целевую функцию.

### Пример

Python

@log(filename="mylog.txt")
def my_function(x, y):
    return x + y

my_function(1, 2)

### Что Делает

- Логирует имя функции и статус выполнения (ok или error).
- Если возникает ошибка, логируется тип ошибки и входные параметры функции.
- Можно указать имя файла для записи логов или оставить пустым для вывода в консоль.
